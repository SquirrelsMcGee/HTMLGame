<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title></title>
</head>

<body>
    <canvas id="canvas"></canvas>
    <label for="scene">Scene Id</label>
    <select name="scene" id="sceneSelect">
        <option value="0">0</option>
        <option value="1">1</option>
    </select>

    <div id="dataField"></div>
</body>

<!--
    Script imports
-->

<!--
    Load base scripts first
-->

<script src="./js/Util.js"></script>
<script src="./js/Engine.js"></script>
<script src="./js/InputManager.js"></script>
<script src="./js/Collider.js"></script>
<script src="./js/AssetDB.js"></script>
<script src="./js/Scene.js"></script>
<script src="./js/GameObject.js"></script>


<script src="./js/OldSquare.js"></script>

<!--
    Load derived classes
-->
<script src="./js/ExampleScene.js"></script>
<script src="./js/RandomPoints.js"></script>

<script src="./js/PlayerObject.js"></script>

<script type="text/javascript">
    /* Main Entry Point */

    const gameEngine = new Engine( () => {
        return (document.getElementById("canvas"));
    });
    const exampleScene = new ExampleScene(gameEngine);
    const randomPoints = new RandomPoints(gameEngine);

    const scenes = [
        exampleScene,
        randomPoints
    ];
    var sceneId = 0;

    gameEngine.setScene(scenes[sceneId]);

    document.body.innerHTML += "<br>";

    // Retrieving simple assets from the db
    for (var i = 0; i < exampleScene.getAssetCount(); i++) {
        let asset = exampleScene.findAsset("asset" + i);
        if (asset != null) document.body.innerHTML += asset;
    }

    let script0 = exampleScene.findAsset("script0");
    script0();

    // Testing invalid asset key
    let probablyNull = exampleScene.findAsset("does_not_exist");
    document.body.innerHTML += "<br>probablyNull = "+ (probablyNull === null);

    gameEngine.start();

    document.getElementById("sceneSelect").addEventListener("change", (e) => {
        gameEngine.setScene(scenes[parseInt(e.target.value)]);
    });

</script>

<style>
    canvas {
        border: 1px solid black;
    }
</style>

</html>
